{"ast":null,"code":"var _jsxFileName = \"C:\\\\Jean\\\\Scolarite\\\\NUS\\\\SoC\\\\Data_vizualisation\\\\Assignement_2\\\\assignement2-app\\\\src\\\\Components\\\\Histogram.jsx\",\n  _s = $RefreshSig$();\nimport * as d3 from \"d3\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Histogram() {\n  _s();\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    d3.dsv(\",\", \"/assets/hist1.csv\", d => ({\n      week: d.week.slice(0, 10),\n      count: +d.count\n    })).then(loadedData => {\n      setData(loadedData);\n    });\n  }, []);\n  if (!data) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading viz...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(GraphVisualization, {\n    data: data\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 12\n  }, this);\n}\n_s(Histogram, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n_c = Histogram;\nfunction GraphVisualization({\n  data\n}) {\n  const width = 928;\n  const height = 500;\n  const marginTop = 20;\n  const marginRight = 0;\n  const marginBottom = 30;\n  const marginLeft = 40;\n\n  //  useEffect(() => {\n  d3.select(\"#hist-container\").select(\"svg\").remove();\n  // Create the horizontal scale and its axis generator.\n  const x = d3.scaleBand().domain(data.map(d => d.week)).range([marginLeft, width - marginRight]).padding(0.1);\n  const tickValues = data.map(d => d.week).filter((_, i) => i % 2 === 0); // Une valeur sur deux\n\n  const xAxis = d3.axisBottom(x).tickValues(tickValues) // Utilise seulement certaines valeurs\n  .tickSizeOuter(0);\n\n  // Create the vertical scale.\n  const y = d3.scaleLinear().domain([0, d3.max(data, d => d.count)]).nice().range([height - marginBottom, marginTop]);\n\n  // Create the SVG container and call the zoom behavior.\n  //const svg = d3.create(\"svg\")\n  const svg = d3.select(\"#hist-container\").append(\"svg\").attr(\"viewBox\", [0, 0, width, height]).attr(\"width\", width).attr(\"height\", height).attr(\"style\", \"max-width: 100%; height: auto;\").call(zoom);\n\n  // Append the bars.\n  svg.append(\"g\").attr(\"class\", \"bars\").attr(\"fill\", \"steelblue\").selectAll(\"rect\").data(data).join(\"rect\").attr(\"x\", d => x(d.week)).attr(\"y\", d => y(d.count)).attr(\"height\", d => y(0) - y(d.count)).attr(\"width\", x.bandwidth());\n\n  // Append the axes.\n  svg.append(\"g\").attr(\"class\", \"x-axis\").attr(\"transform\", `translate(0,${height - marginBottom})`).call(xAxis).selectAll(\"text\") // Sélectionne tous les ticks\n  .style(\"text-anchor\", \"end\") // Alignement\n  .attr(\"dx\", \"-0.5em\") // Décalage horizontal (ajuste si besoin)\n  .attr(\"dy\", \"-0.2em\") // Décalage vertical (ajuste si besoin)\n  .attr(\"transform\", \"rotate(-45)\"); // Rotation à 90° vers la gauche\n\n  svg.append(\"g\").attr(\"class\", \"y-axis\").attr(\"transform\", `translate(${marginLeft},0)`).call(d3.axisLeft(y)).call(g => g.select(\".domain\").remove());\n  function zoom(svg) {\n    const extent = [[marginLeft, marginTop], [width - marginRight, height - marginTop]];\n    svg.call(d3.zoom().scaleExtent([1, 8]).translateExtent(extent).extent(extent).on(\"zoom\", zoomed));\n    function zoomed(event) {\n      x.range([marginLeft, width - marginRight].map(d => event.transform.applyX(d)));\n      svg.selectAll(\".bars rect\").attr(\"x\", d => x(d.week)).attr(\"width\", x.bandwidth());\n      svg.selectAll(\".x-axis\").call(xAxis);\n    }\n  }\n\n  //}, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"hist-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n_c2 = GraphVisualization;\nexport default Histogram;\nvar _c, _c2;\n$RefreshReg$(_c, \"Histogram\");\n$RefreshReg$(_c2, \"GraphVisualization\");","map":{"version":3,"names":["d3","useState","useEffect","jsxDEV","_jsxDEV","Histogram","_s","data","setData","dsv","d","week","slice","count","then","loadedData","children","fileName","_jsxFileName","lineNumber","columnNumber","GraphVisualization","_c","width","height","marginTop","marginRight","marginBottom","marginLeft","select","remove","x","scaleBand","domain","map","range","padding","tickValues","filter","_","i","xAxis","axisBottom","tickSizeOuter","y","scaleLinear","max","nice","svg","append","attr","call","zoom","selectAll","join","bandwidth","style","axisLeft","g","extent","scaleExtent","translateExtent","on","zoomed","event","transform","applyX","id","_c2","$RefreshReg$"],"sources":["C:/Jean/Scolarite/NUS/SoC/Data_vizualisation/Assignement_2/assignement2-app/src/Components/Histogram.jsx"],"sourcesContent":["import * as d3 from \"d3\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nfunction Histogram() {\r\n    const [data, setData] = useState(null);\r\n  \r\n    useEffect(() => {\r\n      d3.dsv(\",\", \"/assets/hist1.csv\", (d) => ({\r\n        week: d.week.slice(0, 10),\r\n        count: +d.count,\r\n      })).then((loadedData) => {\r\n        setData(loadedData);\r\n      });\r\n    }, []);\r\n  \r\n    if (!data) return <p>Loading viz...</p>;\r\n  \r\n    return <GraphVisualization data={data} />;\r\n  }\r\n  \r\nfunction GraphVisualization({data}){\r\n  \r\n    const width = 928;\r\n    const height = 500;\r\n    const marginTop = 20;\r\n    const marginRight = 0;\r\n    const marginBottom = 30;\r\n    const marginLeft = 40;\r\n\r\n//  useEffect(() => {\r\n    d3.select(\"#hist-container\").select(\"svg\").remove(); \r\n    // Create the horizontal scale and its axis generator.\r\n    const x = d3.scaleBand()\r\n        .domain(data.map(d => d.week))\r\n        .range([marginLeft, width - marginRight])\r\n        .padding(0.1);\r\n\r\n    const tickValues = data.map(d => d.week).filter((_, i) => i % 2 === 0); // Une valeur sur deux\r\n\r\n    const xAxis = d3.axisBottom(x)\r\n        .tickValues(tickValues) // Utilise seulement certaines valeurs\r\n        .tickSizeOuter(0);\r\n\r\n\r\n    // Create the vertical scale.\r\n    const y = d3.scaleLinear()\r\n        .domain([0, d3.max(data, d => d.count)]).nice()\r\n        .range([height - marginBottom, marginTop]);\r\n\r\n    // Create the SVG container and call the zoom behavior.\r\n    //const svg = d3.create(\"svg\")\r\n    const svg = d3.select(\"#hist-container\")\r\n        .append(\"svg\")\r\n        .attr(\"viewBox\", [0, 0, width, height])\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .attr(\"style\", \"max-width: 100%; height: auto;\")\r\n        .call(zoom);\r\n\r\n    // Append the bars.\r\n    svg.append(\"g\")\r\n        .attr(\"class\", \"bars\")\r\n        .attr(\"fill\", \"steelblue\")\r\n        .selectAll(\"rect\")\r\n        .data(data)\r\n        .join(\"rect\")\r\n        .attr(\"x\", d => x(d.week))\r\n        .attr(\"y\", d => y(d.count))\r\n        .attr(\"height\", d => y(0) - y(d.count))\r\n        .attr(\"width\", x.bandwidth());\r\n\r\n    // Append the axes.\r\n    svg.append(\"g\")\r\n    .attr(\"class\", \"x-axis\")\r\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\r\n    .call(xAxis)\r\n  .selectAll(\"text\")  // Sélectionne tous les ticks\r\n    .style(\"text-anchor\", \"end\")  // Alignement\r\n    .attr(\"dx\", \"-0.5em\")  // Décalage horizontal (ajuste si besoin)\r\n    .attr(\"dy\", \"-0.2em\") // Décalage vertical (ajuste si besoin)\r\n    .attr(\"transform\", \"rotate(-45)\"); // Rotation à 90° vers la gauche\r\n\r\n    svg.append(\"g\")\r\n        .attr(\"class\", \"y-axis\")\r\n        .attr(\"transform\", `translate(${marginLeft},0)`)\r\n        .call(d3.axisLeft(y))\r\n        .call(g => g.select(\".domain\").remove());\r\n\r\n\r\n\r\n    function zoom(svg) {\r\n        const extent = [[marginLeft, marginTop], [width - marginRight, height - marginTop]];\r\n\r\n        svg.call(d3.zoom()\r\n            .scaleExtent([1, 8])\r\n            .translateExtent(extent)\r\n            .extent(extent)\r\n            .on(\"zoom\", zoomed));\r\n\r\n        function zoomed(event) {\r\n        x.range([marginLeft, width - marginRight].map(d => event.transform.applyX(d)));\r\n        svg.selectAll(\".bars rect\").attr(\"x\", d => x(d.week)).attr(\"width\", x.bandwidth());\r\n        svg.selectAll(\".x-axis\").call(xAxis);\r\n        }\r\n    }\r\n\r\n  //}, [data]);\r\n  return (\r\n    <div id=\"hist-container\">\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default Histogram;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}