{"ast":null,"code":"var _jsxFileName = \"C:\\\\Jean\\\\Scolarite\\\\NUS\\\\SoC\\\\Data_vizualisation\\\\Assignement_2\\\\assignement2-app\\\\src\\\\Components\\\\BarChart.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport data from \"../assets/bar1.json\";\nimport DateSlider2 from \"./DateSlider2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BarPlot({\n  selectedGroups\n}) {\n  if (!data) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading viz...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(GraphVisualization, {\n    data: data,\n    selectedGroups: selectedGroups\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 10\n  }, this);\n}\n_c = BarPlot;\nfunction GraphVisualization({\n  data,\n  selectedGroups\n}) {\n  _s();\n  //const svgRef = useRef();\n  const [dateRange, setDateRange] = useState([0, 28]);\n  useEffect(() => {\n    d3.select(\"#bar-container\").select(\"svg\").remove();\n    const width = 900;\n    const height = data.length * 30;\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const filteredData = data; //data.filter(d => d.group.some(group => selectedGroups.has(group)));\n\n    //let filteredNodes = nodes.filter(node => node.genres.some(genre => selectedGroups.has(genre))\n    //);\n\n    const xScale = d3.scaleLinear().domain([0, d3.max(filteredData, d => d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))]).range([0, width]);\n    const yScale = d3.scaleBand().domain(filteredData.map(d => d.genre)).range([0, height]).padding(0.2);\n    const svg = d3.select(\"#bar-container\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).attr(\"viewBox\", [-width / 2, -height / 2, width, height]).style(\"max-width\", \"100%\").style(\"height\", \"auto\").style(\"border\", \"1px solid #333533\").style(\"border-radius\", \"8px\");\n    const g = svg.append(\"g\");\n    const zoom = d3.zoom().scaleExtent([0.5, 5]) // Facteur de zoom min/max\n    .on(\"zoom\", event => {\n      g.attr(\"transform\", event.transform); // Applique la transformation sur le groupe contenant le graph\n    });\n    svg.call(zoom); // Active le zoom sur le SVG\n\n    g.selectAll(\"rect\").data(filteredData, d => d.genre).join(enter => enter.append(\"rect\").attr(\"x\", 0).attr(\"y\", d => yScale(d.genre)).attr(\"height\", yScale.bandwidth()).attr(\"width\", 0).attr(\"fill\", d => color(d.genre)).transition().duration(500).attr(\"width\", d => xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))),\n    //xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))),\n    update => update.transition().duration(500).attr(\"y\", d => yScale(d.genre)).attr(\"width\", d => xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))),\n    //xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))),\n    exit => exit.transition().duration(300).attr(\"width\", 0).remove());\n    g.selectAll(\"text\").data(filteredData, d => d.genre).join(enter => enter.append(\"text\").attr(\"x\", 5).attr(\"y\", d => yScale(d.genre) + yScale.bandwidth() / 2).attr(\"dy\", \"0.35em\").text(d => `${d.genre}: ${d.genre}`).style(\"fill\", \"white\"), update => update.transition().duration(500).attr(\"y\", d => yScale(d.genre) + yScale.bandwidth() / 2).text(d => `${d.genre}: ${d3.mean(d.nb_game.slice(dateRange[0], dateRange[1]))}`), exit => exit.transition().duration(300).style(\"opacity\", 0).remove());\n  }, [data, dateRange]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"bar-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slider-container\",\n      children: /*#__PURE__*/_jsxDEV(DateSlider2, {\n        minDate: 0,\n        maxDate: 28,\n        dateRange: dateRange,\n        setDateRange: setDateRange,\n        className: \"date-slider2\",\n        label: \"Date Range2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n_s(GraphVisualization, \"/4gXqL+1L34Dh/xKxBk9VGwrquo=\");\n_c2 = GraphVisualization;\nexport default BarPlot;\nvar _c, _c2;\n$RefreshReg$(_c, \"BarPlot\");\n$RefreshReg$(_c2, \"GraphVisualization\");","map":{"version":3,"names":["useEffect","useState","d3","data","DateSlider2","jsxDEV","_jsxDEV","BarPlot","selectedGroups","children","fileName","_jsxFileName","lineNumber","columnNumber","GraphVisualization","_c","_s","dateRange","setDateRange","select","remove","width","height","length","color","scaleOrdinal","schemeCategory10","filteredData","xScale","scaleLinear","domain","max","d","mean","nb_game","slice","range","yScale","scaleBand","map","genre","padding","svg","append","attr","style","g","zoom","scaleExtent","on","event","transform","call","selectAll","join","enter","bandwidth","transition","duration","update","exit","text","id","className","minDate","maxDate","label","_c2","$RefreshReg$"],"sources":["C:/Jean/Scolarite/NUS/SoC/Data_vizualisation/Assignement_2/assignement2-app/src/Components/BarChart.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport data from \"../assets/bar1.json\";\r\nimport DateSlider2 from \"./DateSlider2\";\r\n\r\nfunction BarPlot({ selectedGroups }) {\r\n  if (!data) return <p>Loading viz...</p>;\r\n\r\n  return <GraphVisualization data={data} selectedGroups={selectedGroups} />;\r\n}\r\n\r\nfunction GraphVisualization({ data, selectedGroups }) {\r\n  //const svgRef = useRef();\r\n  const [dateRange, setDateRange] = useState([0, 28]);\r\n  useEffect(() => {\r\n    d3.select(\"#bar-container\").select(\"svg\").remove();\r\n\r\n    const width = 900;\r\n    const height = data.length * 30;\r\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n    const filteredData = data;//data.filter(d => d.group.some(group => selectedGroups.has(group)));\r\n    \r\n    //let filteredNodes = nodes.filter(node => node.genres.some(genre => selectedGroups.has(genre))\r\n    //);\r\n\r\n    const xScale = d3.scaleLinear()\r\n      .domain([0, d3.max(filteredData, d => d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))])\r\n      .range([0, width]);\r\n\r\n    const yScale = d3.scaleBand()\r\n      .domain(filteredData.map(d => d.genre))\r\n      .range([0, height])\r\n      .padding(0.2);\r\n\r\n    const svg = d3.select(\"#bar-container\")\r\n      .append(\"svg\")\r\n      .attr(\"width\", width)\r\n      .attr(\"height\", height)\r\n      .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\r\n      .style(\"max-width\", \"100%\")\r\n      .style(\"height\", \"auto\")\r\n      .style(\"border\", \"1px solid #333533\")\r\n      .style(\"border-radius\", \"8px\");\r\n\r\n    const g = svg.append(\"g\");\r\n\r\n    \r\n    const zoom = d3.zoom()\r\n        .scaleExtent([0.5, 5]) // Facteur de zoom min/max\r\n        .on(\"zoom\", (event) => {\r\n        g.attr(\"transform\", event.transform); // Applique la transformation sur le groupe contenant le graph\r\n        });\r\n\r\n        svg.call(zoom); // Active le zoom sur le SVG\r\n    \r\n\r\n    g.selectAll(\"rect\")\r\n      .data(filteredData, d => d.genre)\r\n      .join(\r\n        enter => enter.append(\"rect\")\r\n          .attr(\"x\", 0)\r\n          .attr(\"y\", d => yScale(d.genre))\r\n          .attr(\"height\", yScale.bandwidth())\r\n          .attr(\"width\", 0) \r\n          .attr(\"fill\", d => color(d.genre))\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"width\", d =>xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))),//xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))),\r\n        update => update\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"y\", d => yScale(d.genre))\r\n          .attr(\"width\", d => xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))) ,//xScale(d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])))),\r\n        exit => exit\r\n          .transition()\r\n          .duration(300)\r\n          .attr(\"width\", 0)\r\n          .remove()\r\n      );\r\n\r\n    g.selectAll(\"text\")\r\n      .data(filteredData, d => d.genre)\r\n      .join(\r\n        enter => enter.append(\"text\")\r\n          .attr(\"x\", 5)\r\n          .attr(\"y\", d => yScale(d.genre) + yScale.bandwidth() / 2)\r\n          .attr(\"dy\", \"0.35em\")\r\n          .text(d => `${d.genre}: ${d.genre}`)\r\n          .style(\"fill\", \"white\"),\r\n        update => update\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"y\", d => yScale(d.genre) + yScale.bandwidth() / 2)\r\n          .text(d => `${d.genre}: ${d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])) }`),\r\n        exit => exit\r\n          .transition()\r\n          .duration(300)\r\n          .style(\"opacity\", 0)\r\n          .remove()\r\n      );\r\n  }, [data, dateRange]);\r\n\r\n  return (\r\n    <div id=\"bar-container\">\r\n    <div className=\"slider-container\">\r\n        <DateSlider2 minDate={0} maxDate={28} dateRange={dateRange} setDateRange={setDateRange} className=\"date-slider2\" label=\"Date Range2\"/>\r\n    </div>\r\n  </div>);\r\n}\r\n\r\nexport default BarPlot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}