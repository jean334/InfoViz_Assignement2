{"ast":null,"code":"var _jsxFileName = \"C:\\\\Jean\\\\Scolarite\\\\NUS\\\\SoC\\\\Data_vizualisation\\\\Assignement_2\\\\assignement2-app\\\\src\\\\Components\\\\BarChart.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport data from \"../assets/barChart1.json\";\nimport DateSlider2 from \"./DateSlider2\";\nimport NewSlider from \"./NewSlider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BarPlot() {\n  //{ selectedGroups }) {\n  if (!data) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading viz...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(GraphVisualization, {\n    data: data\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 10\n  }, this); // selectedGroups={selectedGroups} />;\n}\n_c = BarPlot;\nfunction GraphVisualization({\n  data\n}) {\n  _s();\n  //, selectedGroups }) {\n  const [dateRange, setDateRange] = useState([0, 2023 - 2010 + 1]);\n  useEffect(() => {\n    d3.select(\"#bar-container\").select(\"svg\").remove();\n    const width = 900;\n    const height = data.length * 30;\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const filteredData = data; //data.filter(d => d.group.some(group => selectedGroups.has(group)));\n\n    //let filteredNodes = nodes.filter(node => node.genres.some(genre => selectedGroups.has(genre))\n    //);\n    const xScale = d3.scaleLinear().domain([0, d3.max(filteredData, d => d3.sum(d.positive.slice(0, 13)))]) //d3.mean(d.positive.slice(dateRange[0], dateRange[1])))])\n    .range([0, width]);\n    const yScale = d3.scaleBand().domain(filteredData.map(d => d.socialmedia)).range([0, height]).padding(0.2);\n    const svg = d3.select(\"#bar-container\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).attr(\"viewBox\", [0, 0, width + 10, height]).style(\"max-width\", \"100%\").style(\"height\", \"auto\").style(\"border\", \"1px solid #333533\").style(\"border-radius\", \"8px\");\n\n    //const g = svg.append(\"g\");\n\n    /*\r\n    const zoom = d3.zoom()\r\n        .scaleExtent([0.5, 5]) // Facteur de zoom min/max\r\n        .on(\"zoom\", (event) => {\r\n        g.attr(\"transform\", event.transform); // Applique la transformation sur le groupe contenant le graph\r\n        });\r\n          svg.call(zoom); // Active le zoom sur le SVG\r\n    */\n    svg.selectAll(\"rect\").data(filteredData, d => d.socialmedia).join(enter => enter.append(\"rect\").attr(\"x\", 0).attr(\"y\", d => yScale(d.socialmedia)).attr(\"height\", yScale.bandwidth()).attr(\"width\", 0).attr(\"fill\", d => color(d.socialmedia)).transition().duration(500).attr(\"width\", d => xScale(d3.sum(d.positive.slice(dateRange[0], dateRange[1])))), update => update.transition().duration(500).attr(\"y\", d => yScale(d.socialmedia)).attr(\"width\", d => xScale(d3.sum(d.positive.slice(dateRange[0], dateRange[1])))), exit => exit.transition().duration(300).attr(\"width\", 0).remove());\n    svg.selectAll(\"text\").data(filteredData, d => d.socialmedia).join(enter => enter.append(\"text\").attr(\"x\", 5).attr(\"y\", d => yScale(d.socialmedia) + yScale.bandwidth() / 2).attr(\"dy\", \"0.35em\").text(d => `${d.socialmedia}:  ${d3.sum(d.positive.slice(dateRange[0], dateRange[1]))}`).style(\"fill\", \"white\"), update => update.transition().duration(500).attr(\"y\", d => yScale(d.socialmedia) + yScale.bandwidth() / 2).text(d => `${d.socialmedia}: ${d3.sum(d.positive.slice(dateRange[0], dateRange[1]))}`),\n    //d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])) }`),\n    exit => exit.transition().duration(300).style(\"opacity\", 0).remove());\n  }, [data, dateRange]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"bar-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slider-container\",\n      children: /*#__PURE__*/_jsxDEV(NewSlider, {\n        props: {\n          dateRange: dateRange,\n          setDateRange: setDateRange\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n_s(GraphVisualization, \"qMBJe8tih6ntCMdBpsTn5DdmIhg=\");\n_c2 = GraphVisualization;\nexport default BarPlot;\nvar _c, _c2;\n$RefreshReg$(_c, \"BarPlot\");\n$RefreshReg$(_c2, \"GraphVisualization\");","map":{"version":3,"names":["useEffect","useState","d3","data","DateSlider2","NewSlider","jsxDEV","_jsxDEV","BarPlot","children","fileName","_jsxFileName","lineNumber","columnNumber","GraphVisualization","_c","_s","dateRange","setDateRange","select","remove","width","height","length","color","scaleOrdinal","schemeCategory10","filteredData","xScale","scaleLinear","domain","max","d","sum","positive","slice","range","yScale","scaleBand","map","socialmedia","padding","svg","append","attr","style","selectAll","join","enter","bandwidth","transition","duration","update","exit","text","id","className","props","_c2","$RefreshReg$"],"sources":["C:/Jean/Scolarite/NUS/SoC/Data_vizualisation/Assignement_2/assignement2-app/src/Components/BarChart.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport data from \"../assets/barChart1.json\";\r\nimport DateSlider2 from \"./DateSlider2\";\r\nimport NewSlider from \"./NewSlider\";\r\n\r\nfunction BarPlot(){//{ selectedGroups }) {\r\n  if (!data) return <p>Loading viz...</p>;\r\n\r\n  return <GraphVisualization data={data}/>;// selectedGroups={selectedGroups} />;\r\n}\r\n\r\nfunction GraphVisualization({ data}){//, selectedGroups }) {\r\n  const [dateRange, setDateRange] = useState([0, 2023-2010+1]);\r\n  useEffect(() => {\r\n    d3.select(\"#bar-container\").select(\"svg\").remove();\r\n\r\n    const width = 900;\r\n    const height = data.length * 30;\r\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n    const filteredData = data;//data.filter(d => d.group.some(group => selectedGroups.has(group)));\r\n    \r\n    //let filteredNodes = nodes.filter(node => node.genres.some(genre => selectedGroups.has(genre))\r\n    //);\r\n    const xScale = d3.scaleLinear()\r\n      .domain([0, d3.max(filteredData, d => d3.sum(d.positive.slice(0, 13)))])//d3.mean(d.positive.slice(dateRange[0], dateRange[1])))])\r\n      .range([0, width]);\r\n\r\n    const yScale = d3.scaleBand()\r\n      .domain(filteredData.map(d => d.socialmedia))\r\n      .range([0, height])\r\n      .padding(0.2);\r\n\r\n    const svg = d3.select(\"#bar-container\")\r\n      .append(\"svg\")\r\n      .attr(\"width\", width)\r\n      .attr(\"height\", height)\r\n      .attr(\"viewBox\", [0, 0, width+10, height])\r\n      .style(\"max-width\", \"100%\")\r\n      .style(\"height\", \"auto\")\r\n      .style(\"border\", \"1px solid #333533\")\r\n      .style(\"border-radius\", \"8px\");\r\n\r\n    //const g = svg.append(\"g\");\r\n\r\n    /*\r\n    const zoom = d3.zoom()\r\n        .scaleExtent([0.5, 5]) // Facteur de zoom min/max\r\n        .on(\"zoom\", (event) => {\r\n        g.attr(\"transform\", event.transform); // Applique la transformation sur le groupe contenant le graph\r\n        });\r\n\r\n        svg.call(zoom); // Active le zoom sur le SVG\r\n    */\r\n    svg.selectAll(\"rect\")\r\n      .data(filteredData, d => d.socialmedia)\r\n      .join(\r\n        enter => enter.append(\"rect\")\r\n          .attr(\"x\", 0)\r\n          .attr(\"y\", d => yScale(d.socialmedia))\r\n          .attr(\"height\", yScale.bandwidth())\r\n          .attr(\"width\", 0) \r\n          .attr(\"fill\", d => color(d.socialmedia))\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"width\", d =>xScale(d3.sum(d.positive.slice(dateRange[0], dateRange[1])))),\r\n        update => update\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"y\", d => yScale(d.socialmedia))\r\n          .attr(\"width\", d => xScale(d3.sum(d.positive.slice(dateRange[0], dateRange[1])))),\r\n        exit => exit\r\n          .transition()\r\n          .duration(300)\r\n          .attr(\"width\", 0)\r\n          .remove()\r\n      );\r\n\r\n    svg.selectAll(\"text\")\r\n      .data(filteredData, d => d.socialmedia)\r\n      .join(\r\n        enter => enter.append(\"text\")\r\n          .attr(\"x\", 5)\r\n          .attr(\"y\", d => yScale(d.socialmedia) + yScale.bandwidth() / 2)\r\n          .attr(\"dy\", \"0.35em\")\r\n          .text(d => `${d.socialmedia}:  ${d3.sum(d.positive.slice(dateRange[0], dateRange[1]))}`)\r\n          .style(\"fill\", \"white\"),\r\n        update => update\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"y\", d => yScale(d.socialmedia) + yScale.bandwidth() / 2)\r\n          .text(d => `${d.socialmedia}: ${d3.sum(d.positive.slice(dateRange[0], dateRange[1]))}`),//d3.mean(d.nb_game.slice(dateRange[0], dateRange[1])) }`),\r\n        exit => exit\r\n          .transition()\r\n          .duration(300)\r\n          .style(\"opacity\", 0)\r\n          .remove()\r\n      );\r\n  }, [data, dateRange]);\r\n\r\n  return (\r\n    <div id=\"bar-container\">\r\n    <div className=\"slider-container\">\r\n      <NewSlider props={{dateRange:dateRange, setDateRange: setDateRange}}/>\r\n    </div>\r\n  </div>);\r\n}\r\n\r\nexport default BarPlot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}