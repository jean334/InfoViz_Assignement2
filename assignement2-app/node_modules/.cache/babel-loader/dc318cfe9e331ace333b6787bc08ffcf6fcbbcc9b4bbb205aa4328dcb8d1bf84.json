{"ast":null,"code":"var _jsxFileName = \"C:\\\\Jean\\\\Scolarite\\\\NUS\\\\SoC\\\\Data_vizualisation\\\\Assignement_2\\\\assignement2-app\\\\src\\\\Components\\\\TreeMap.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport data from \"../assets/treeMap.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TreeMap() {\n  //{ selectedGroups }) {\n  if (!data) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading viz...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(GraphVisualization, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 12\n  }, this); //data={data} selectedGroups={selectedGroups} />;\n}\n_c = TreeMap;\nconst GraphVisualization = () => {\n  _s();\n  const svgRef = useRef(null);\n  const width = 1154;\n  const height = 1154;\n  useEffect(() => {\n    if (!data) return;\n    d3.select(\"#treemap-container\").select(\"svg\").remove();\n    const color = d3.scaleOrdinal(data.children.map(d => d.name), d3.schemeTableau10);\n    const root = d3.treemap().tile(d3.treemapSquarify).size([width, height]).padding(1).round(true)(d3.hierarchy(data).sum(d => d.value).sort((a, b) => b.value - a.value));\n    const svg = d3.select(\"#treemap-container\").append(\"svg\").attr(\"viewBox\", `0 0 ${width} ${height}`).style(\"font\", \"10px sans-serif\");\n    const z = svg.append(\"g\");\n    const zoom = d3.zoom().scaleExtent([0.5, 5]).on(\"zoom\", event => {\n      z.attr(\"transform\", event.transform);\n    });\n    svg.call(zoom);\n    const leaf = z.selectAll(\"g\").data(root.leaves()).join(\"g\").attr(\"transform\", d => `translate(${d.x0},${d.y0})`);\n    const format = d3.format(\",d\");\n    leaf.append(\"title\").text(d => `${d.ancestors().reverse().map(d => d.data.name).join(\".\")}\\n${format(d.value)}`);\n    console.log(leaf);\n    leaf.append(\"rect\").attr(\"fill\", d => {\n      while (d.depth > 1) d = d.parent;\n      return color(d.data.name);\n    }).attr(\"fill-opacity\", 1).attr(\"width\", d => d.x1 - d.x0).attr(\"height\", d => d.y1 - d.y0);\n    leaf.append(\"text\").selectAll(\"tspan\").data(d => d.data.name.split(/(?=[A-Z][a-z])|\\s+/g).concat(format(d.value))).join(\"tspan\").attr(\"x\", 3).attr(\"y\", (d, i, nodes) => `${(i === nodes.length - 1) * 0.3 + 1.1 + i * 0.9}em`).attr(\"fill-opacity\", (d, i, nodes) => i === nodes.length - 1 ? 0.7 : null).text(d => d).style(\"font-size\", (d, i, nodes) => i === nodes.length - 1 ? \"1em\" : \"2em\").style(\"font-weight\", (d, i, nodes) => i === nodes.length - 1 ? \"bold\" : \"normal\");\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"treemap-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 12\n  }, this);\n};\n_s(GraphVisualization, \"89Ty783ABEwsfMbSOeu9vscWF34=\");\n_c2 = GraphVisualization;\nexport default TreeMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"TreeMap\");\n$RefreshReg$(_c2, \"GraphVisualization\");","map":{"version":3,"names":["useEffect","useState","useRef","d3","data","jsxDEV","_jsxDEV","TreeMap","children","fileName","_jsxFileName","lineNumber","columnNumber","GraphVisualization","_c","_s","svgRef","width","height","select","remove","color","scaleOrdinal","map","d","name","schemeTableau10","root","treemap","tile","treemapSquarify","size","padding","round","hierarchy","sum","value","sort","a","b","svg","append","attr","style","z","zoom","scaleExtent","on","event","transform","call","leaf","selectAll","leaves","join","x0","y0","format","text","ancestors","reverse","console","log","depth","parent","x1","y1","split","concat","i","nodes","length","id","_c2","$RefreshReg$"],"sources":["C:/Jean/Scolarite/NUS/SoC/Data_vizualisation/Assignement_2/assignement2-app/src/Components/TreeMap.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport data from \"../assets/treeMap.json\";\r\n\r\n\r\nfunction TreeMap(){//{ selectedGroups }) {\r\n    if (!data) return <p>Loading viz...</p>;\r\n  \r\n    return <GraphVisualization/>; //data={data} selectedGroups={selectedGroups} />;\r\n  }\r\n\r\nconst GraphVisualization = () => {\r\n    const svgRef = useRef(null);\r\n    const width = 1154;\r\n    const height = 1154;\r\n\r\n    useEffect(() => {\r\n        if (!data) return;\r\n        d3.select(\"#treemap-container\").select(\"svg\").remove();\r\n\r\n        const color = d3.scaleOrdinal(data.children.map((d) => d.name), d3.schemeTableau10);\r\n\r\n        const root = d3.treemap()\r\n        .tile(d3.treemapSquarify)\r\n        .size([width, height])\r\n        .padding(1)\r\n        .round(true)(\r\n            d3.hierarchy(data)\r\n            .sum((d) => d.value)\r\n            .sort((a, b) => b.value - a.value)\r\n        );\r\n\r\n        const svg = d3.select(\"#treemap-container\")\r\n        .append(\"svg\")\r\n        .attr(\"viewBox\", `0 0 ${width} ${height}`)\r\n        .style(\"font\", \"10px sans-serif\");\r\n\r\n\r\n        const z = svg.append(\"g\");\r\n\r\n        const zoom = d3.zoom()\r\n            .scaleExtent([0.5, 5]) \r\n            .on(\"zoom\", (event) => {\r\n            z.attr(\"transform\", event.transform); \r\n            });\r\n    \r\n        svg.call(zoom);\r\n\r\n        const leaf = z.selectAll(\"g\")\r\n        .data(root.leaves())\r\n        .join(\"g\")\r\n        .attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\r\n\r\n        const format = d3.format(\",d\");\r\n        leaf.append(\"title\").text((d) =>\r\n        `${d.ancestors().reverse().map((d) => d.data.name).join(\".\")}\\n${format(d.value)}`\r\n        );\r\n        console.log(leaf)\r\n        leaf.append(\"rect\")\r\n        .attr(\"fill\", (d) => {\r\n            while (d.depth > 1) d = d.parent;\r\n            return color(d.data.name);\r\n        })\r\n        .attr(\"fill-opacity\", 1)\r\n        .attr(\"width\", (d) => d.x1 - d.x0)\r\n        .attr(\"height\", (d) => d.y1 - d.y0);\r\n\r\n        leaf.append(\"text\")\r\n        .selectAll(\"tspan\")\r\n        .data((d) => d.data.name.split(/(?=[A-Z][a-z])|\\s+/g).concat(format(d.value)))\r\n        .join(\"tspan\")\r\n        .attr(\"x\", 3)\r\n        .attr(\"y\", (d, i, nodes) => `${(i === nodes.length - 1) * 0.3 + 1.1 + i * 0.9}em`)\r\n        .attr(\"fill-opacity\", (d, i, nodes) => (i === nodes.length - 1 ? 0.7 : null))\r\n        .text((d) => d)\r\n        .style(\"font-size\", (d, i, nodes) => (i === nodes.length - 1 ? \"1em\" : \"2em\"))\r\n        .style(\"font-weight\", (d, i, nodes) => (i === nodes.length - 1 ? \"bold\" : \"normal\"));\r\n\r\n    }, [data]);\r\n    return <div id=\"treemap-container\"></div>;\r\n    };\r\n\r\nexport default TreeMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}